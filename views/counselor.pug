extends layout

block content
  main
    h2 #{name} 님 – 상담사 
    script.
      window.APP = { name: !{JSON.stringify(name)}, room: !{JSON.stringify(room)}, role: "counselor" };

    .grid-2
      section.panel
        h3 본 채팅
        #messages.messages-box
        .row
          input#message(type="text" placeholder="내담자에게 메시지 전송")
          button#send(type="button") 전송

      section.panel
        h3 AI 보조 패널(상담사에게만 표시됩니다)
        .row
          button#gen-ai(type="button") AI 응답 생성
        label(for="draft") AI 초안
        pre#draft.draft (여기에 AI 초안이 표시됩니다)
        textarea#instruction(rows="4" placeholder="AI에 재생성 지시 전송")
        .row
          button#refine(type="button") AI에게 수정 지시 
          button#use-draft(type="button") 초안을 본 채팅으로 전송
        #ai-status.muted

    script(src="/socket.io/socket.io.js")
    script(src="/counselor.js")
